<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
img{border:0}
.focusPic{overflow:hidden;width:380px;height:460px}
.focusPic img{margin-bottom:10px}
.prev,.next{width:100px;line-height:30px;background:#ccc;text-align:center;cursor:pointer}
.prev{margin-bottom:5px}
.next{margin-top:5px}
</style>
</head>
<body>
<div class="focus">
	  <div class="prev" onclick="imgPlay.turn()">上一张</div>
      <div id="focusPic" class="focusPic">
        <a target="_blank" href="/plus/view.php?aid=658"><img src="images/large_img_1.jpg"></a>
        <a target="_blank" href="/plus/view.php?aid=658"><img src="images/large_img_2.jpg"></a>
        <a target="_blank" href="/plus/view.php?aid=658"><img src="images/large_img_3.jpg"></a>
		<a target="_blank" href="/plus/view.php?aid=658"><img src="images/large_img_4.jpg"></a>
      </div>
	  <div class="next" onclick="imgPlay.turn1()">下一张</div>
</div>
<script type="text/javascript">
var imgPlay=(function(){
	var current=0;
	var scrollPaneNum=1;//变化的屏数
	var step=470;//一次变化的高度
	var duration=16;//一次变化需要的次数
	var scrollInterval;
	var focusPic=document.getElementById('focusPic');
	
	//算法
	function cpu(t,b,c,d) {return c*((t=t/d-1)*t*t+1)+b;}
	
	return{
		turn:function(){
			current++;
			if(current>scrollPaneNum) current=scrollPaneNum;
			imgPlay.scroll();
		},
		turn1:function(){
			current--;
			if(current<0) current=0;
			imgPlay.scroll();
		},
		scroll:function(){
			var count=0;//一次变化的当前次数
			clearInterval(scrollInterval);

			//移动距离
			var begin_value=focusPic.scrollTop;
			var chang_in_value=current*step-begin_value;

			//切换
			scrollInterval=setInterval(function(){
				focusPic.scrollTop=cpu(count,begin_value,chang_in_value,duration);
				count++;
				if(count==duration){
					clearInterval(scrollInterval);
					scrollInterval=0;
					count=0;
					focusPic.scrollTop=begin_value+chang_in_value;
				}
			},10);
		}
	}
})()
</script>
</body>
</html>
