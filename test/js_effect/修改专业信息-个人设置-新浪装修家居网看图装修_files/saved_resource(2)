/*Minify_Cache_Memcache cached @ 2014-02-13 11:34:28;Cache id:min_7ed422909bc9da8697a68c5ddb82aef8.gz*/var tuku=tuku||{};tuku.common=tuku.common||{},tuku.common.getWordNumber=function(a){var a=a.replace(/[^\x00-\xff]/g,"**");return Math.ceil(a.length/2)},tuku.filter={bindClickSelect:function(a){$(a).find(".links a").bind("click",function(a){a.preventDefault();var b=$(this).text(),c='<span class="selected">'+b+'<em title="删除">×</em></span>';$(".module-filter-wrap .selected-line .empty").length<1&&$(".module-filter-wrap .selected-line").append('<span class="empty">清除全部</span>'),$(c).insertBefore($(".module-filter-wrap .selected-line .empty"))})},bindgotosingle:function(a){$(a).find(".gotosingle").bind("click",function(){a.removeClass("line-show-more"),a.find(".btn-wrap").html("<span class='btn open'><em></em>展开</span><span class='btn mul'>多选</span>"),$(a).find(".links a").unbind("click")})},bindOpen:function(){$(".module-filter-wrap .open").live("click",function(){var a=$(this).closest(".line");a.addClass("line-show-more"),$(this).html("<em></em>收起").attr("class","btn close")})},bindClose:function(){$(".module-filter-wrap .close").live("click",function(){var a=$(this).closest(".line");a.removeClass("line-show-more"),$(this).html("<em></em>展开").attr("class","btn open")})},bindMul:function(){var a=this;$(".module-filter-wrap .mul").live("click",function(){var b=this,c=$(this).closest(".line");c.attr("data-type","mul"),$(b).prev(".open").trigger("click"),$(b).prev(".btn").html("确定").attr("class","btn ok"),$(b).html("取消").attr("class","btn gotosingle"),a.bindClickSelect(c),a.bindgotosingle(c)})},emptySelect:function(){$(".module-filter-wrap .selected-line .empty").live("click",function(){$(".module-filter-wrap .selected-line").html('<span class="text">您选择了：</span>')})},removeSelect:function(){$(".module-filter-wrap .selected-line .selected").live("click",function(){var a=this;$(".module-filter-wrap .selected-line .selected").length<2&&$(a).next(".empty").remove(),$(this).remove()})},init:function(){this.bindOpen(),this.bindClose()}},jQuery(function(a){a(".case_editbox").delegate(".del","click",function(){return userLoginState.isLogin()?(confirm("确定要删除这个专辑吗？删除后无法恢复。")&&a.post("/index.php?app=Ajax&c=Album_Del&a=del&time="+a.now(),{id:a("#case_id").val()},function(b){return b=a.parseJSON(b),console.log("dat:",b),1!=b.state?(alert(b.msg?b.msg:"操作失败"),!1):(location.href=b.result.url,void 0)}),void 0):(loginLayer.show(),!1)});var b=a(".case_editbox"),c=a(".case_editbox_shadow");b&&c&&dj.get("ui.fixed",function(){b.offset().top;b.fixed({pos:{top:"40px",left:"auto"},stop:!0,end:30}),a(window).bind("scroll.case_editbox",function(){return a(document).scrollTop()>30?(c.removeClass("disnone"),!0):(c.addClass("disnone"),void 0)})})});;var gj={changeColor:function(a){a.each(function(a,b){$(b).after($("<txt/>").addClass("ext_txt").css("color","#999"));var c=$(b).nextAll(".ext_txt"),d=$(b).val();$(b).data("v",d),$(b).val(""),c.html(d),$(b).css("color","#666");var e="";$(b).focus(function(){c.css("color","#ccc"),e=setInterval(function(){d=$(b).val(),""!=d&&(c.empty(),clearInterval(e))},300)}).blur(function(){clearInterval(e);var a=$(b).val();""==a?(c.html($(b).data("v")),c.css("color","#999")):c.empty()}),c.click(function(){$(b).focus(),c.css("color","#ccc")})})},changeBack:function(a){a.each(function(a,b){$(b).focus(function(){$(b).parent(".mod_ipt").removeClass("mod_ipt").addClass("mod_ipt_on")}).blur(function(){$(b).parent(".mod_ipt_on").removeClass("mod_ipt_on").addClass("mod_ipt")})})},msgHandle:function(a){return'<span class="err_txt">'+a+"</span>"}};;var isIE6=($.browser.msie&&($.browser.version=="6.0")&&!$.support.style)?true:false;var isIE7=$.browser.msie&&($.browser.version=="7.0");var cookieOperate={getCookie:function(a){var f=document.cookie.split("; ");for(var b=0;b<f.length;b++){var e=f[b].split("=");if(e[0]==a){return unescape(e[1])}}return""},setCookie:function(a,b,c){document.cookie=a+"="+escape(b)+";path=/;"+(c!=undefined?"expires="+(new Date(+(new Date())+parseInt(c)*60000)).toGMTString()+";":"")}};var userLoginState={isLogin:function(){if(User){if(User.status=="login"){return true}else{return false}}else{return false}}};function afterFun(a){$.ajax({url:"/index.php?app=Ajax&mod=User_Login",type:"GET",async:false,dataType:"json",success:function(b){$("#submit_btn").removeAttr("disabled");if(b.state){$(".jj_layerout_close").trigger("click");location.href=location.href}else{$("#errorInfo").text(b.msg)}}})}var loginLayer={show:function(){$.layerout({event:"",pos:{top:"50%",left:"50%"},size:[600,333],isFixed:true,template:'<div class="login_layer TB_JJ_layerout"><h3 class="layer_title"><span>\u7528\u6237\u767b\u5f55</span></h3><div class="content clearfix"><div class="layer_left"><form><div class="input_btn"><span class="mod_ipt mod_username"><input type="text" maxlength="35" class="ipt_hack1" id="username" value="\u65b0\u6d6a\u5fae\u535a\u5e10\u53f7/\u624b\u673a\u53f7/\u90ae\u7bb1" name="username" autocomplete="off"></span></div><div class="input_btn"><span class="mod_ipt mod_password"><input type="password" maxlength="35" id="password" class="ipt_hack1" value="\u5bc6\u7801" name="password" autocomplete="off"></span></div><span class="protocol"><input type="checkbox" name="agreement" id="agreement" checked="true"><label for="agreement" class="valigin_m f99">\u4e0b\u6b21\u81ea\u52a8\u767b\u5f55</label></span><a href="http://login.sina.com.cn/forgot/index?entry=sso" target="_blank" class="forget_pwd">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a><div class="input_btn2"><input type="button" id="submit_btn" class="login_btn" value="\u767b  \u5f55"></div><p id="errorInfo"></p></form></div><div class="layer_right"><p class="tip">\u8fd8\u6ca1\u6709\u8d26\u53f7\uff1f</p><p><a href="http://i.house.sina.com.cn/index.php?ctrl=register" target="_blank" class="regist_now">\u7acb\u5373\u6ce8\u518c</a></p></div></div><a href="javascript:;" class="layer_close jj_layerout_close">&times;</a></div>',isCloseMask:true,isClose:false},function(){gj.changeColor($("#username"));gj.changeColor($("#password"));$(".mod_username .ext_txt,.mod_password .ext_txt").css({position:"absolute",left:"5px",top:"0px",_top:"5px"});if(isIE6||isIE7){$(".mod_username .ext_txt,.mod_password .ext_txt").css({position:"absolute",left:"5px",top:"10px"})}HouseSSOController.prototype.loginCallBack=function(b,a){var c=this;if(b.result){this.setSiteCookie(b.userinfo,true)}else{$("#submit_btn").removeAttr("disabled");if(this.custom&&this.custom.fail){this.custom.fail(b);return false}}};window.houseSSOController=new HouseSSOController({popUp:false,errorId:"errorInfo",site:"jiaju",auto:false,loginFun:"afterFun"});$("#username").keyup(function(a){a.preventDefault();if(a.which=="13"){$("#submit_btn").click()}});$("#password").keyup(function(a){a.preventDefault();if(a.which=="13"){$("#submit_btn").click()}});$("#submit_btn").click(function(){try{houseSSOController.logout()}catch(b){}$("#errorInfo").text("");if($("#submit_btn").attr("disabled")){return false}var c=$("#username");var a=$("#password");if(c.val()==""&&a.val()==""){$("#errorInfo").text("\u8bf7\u8f93\u5165\u767b\u5f55\u540d\u548c\u5bc6\u7801\uff01").show();c.focus();return false}if(c.val()==""){$("#errorInfo").text("\u8bf7\u8f93\u5165\u767b\u5f55\u540d\uff01").show();c.focus();return false}if(a.val()==""){$("#errorInfo").text("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01").show();a.focus();return false}$("#submit_btn").attr("disabled","disabled");houseSSOController.login(c.val(),a.val())})})}};var uploadTimeout=messageTimeout=avatarTimeout=timeoutForNav=null;$(document).ready(function(){var i;var a="";var h=false;var f=$(".search_tip > li");var g=[8,46,13,37,39,9];var c=0,b=0;$(".search > input").focus(function(){if($.trim(this.value)!=""){f.parent().removeClass("dpn")}});$(".search > input").keypress(function(j){if(h&&$.inArray(j.keyCode,g)==-1){return false}});$(".search > input").keyup(function(k){if(h&&$.inArray(k.keyCode,g)==-1){return false}var o=$(this).val();o=o.replace(/\//g,"");if(o){f.parent().removeClass("dpn");var m=o.replace(/[^\x00-\xff]/g,"**");var j=m.length;if(j>=100){h=true}else{h=false;if(j>10){a=o.substr(0,6);var l=a.match(/[^\x00-\xff]/g);var n=6-l;if(l<6){a=o.substr(0,10-l*2)}else{a=o.substr(0,5)}f.find("em").text(a+"...")}else{f.find("em").text(o);if(j<=10){a=o}}}}else{h=false;f.parent().addClass("dpn")}if(k.keyCode==13){e()}});function e(){var k=$("#search_type").val();var m=$(".search_input").val();var j="",l="";m=m.replace(/\//g,"");m=m.replace(/\&/g,"%26");if(k=="0"){if(!m){j="/search/"}else{j="/search/t-"}}else{if(k=="1"){if(!m){j="/search/"}else{j="/search/a-"}}else{if(k=="2"){if(!m){j="/search/"}else{j="/search/z-"}}else{if(k=="3"){if(!m){j="/search/"}else{j="/search/r-"}}else{if(!m){j="/search/"}else{j="/search/t-"}}}}}location.href=j+encodeURIComponent(m)+"/"+l}f.bind("click",function(){var j=$(this);var k=j.attr("search-type");$("#search_type").val(k);j.parent().addClass("dpn");e()});$(".btnSearch").bind("click",function(){e()});gj.changeColor($(".search_input"));$(".ext_txt").css({position:"absolute",left:"10px"});$(".message").hover(function(){if(messageTimeout){clearTimeout(messageTimeout)}var j=$(this);var k=j.find(".ul_tip");messageTimeout=setTimeout(function(){!k.is(":animated")&&k.show(300)},200)},function(){if(messageTimeout){clearTimeout(messageTimeout)}var j=$(this);var k=j.find(".ul_tip");messageTimeout=setTimeout(function(){k.hide(300)},200)});$(".avatar,.personal-info").hover(function(){if(avatarTimeout){clearTimeout(avatarTimeout)}var j=$(this);var k=j.find(".ul_tip");avatarTimeout=setTimeout(function(){!k.is(":animated")&&k.show(300)},200)},function(){if(avatarTimeout){clearTimeout(avatarTimeout)}var j=$(this);var k=j.find(".ul_tip");avatarTimeout=setTimeout(function(){k.hide(300)},200)});$(".upload").mouseenter(function(l){if(uploadTimeout){clearTimeout(uploadTimeout)}var j=$(this);var k=j.find(".ul_tip");uploadTimeout=setTimeout(function(){!k.is(":animated")&&k.show(300)},200)}).mouseleave(function(l){if(uploadTimeout){clearTimeout(uploadTimeout)}var j=$(this);var k=j.find(".ul_tip");uploadTimeout=setTimeout(function(){k.hide(300)},200)});$(".ul_tip>li").each(function(){var j=$(this);j.hover(function(){var k=$(this);if(isIE6){k.addClass("message_6hover")}},function(){var k=$(this);if(isIE6){k.removeClass("message_6hover")}})});$(".net_guide").mouseenter(function(){$(".net_nav").removeClass("dpn");$(".net_nav").mouseenter(function(){clearTimeout(timeoutForNav);$(".net_nav").removeClass("dpn")}).mouseleave(function(){$(".net_nav").addClass("dpn")})}).mouseleave(function(){timeoutForNav=setTimeout(function(){$(".net_nav").addClass("dpn")},1000)});(function(){var m=0;var l=function(n){$(n).find("a").addClass("ahover");$(n).siblings().find("a").removeClass("ahover");console.log($(n).attr("search-type"));$("#search_type").val($(n).attr("search-type"))};var j=function(){var o=$(".search_tip li");var p;var n=o.length;for(p=0;p<n;p+=1){o[p].className=""}if(m<0){m=n-1}if(m>=n){m=0}l(o[m])};var k=function(n){if(n&&n.preventDefault){n.preventDefault()}};$(document).click(function(p){var n=p.target||window.event.srcElement;var o=$(".search_tip");if(n.className.indexOf("search_tip")<0&&o[0].className.indexOf("dpn")<0&&!$(n).is(".search_input")){o.addClass("dpn")}}).keydown(function(n){var n=n||window.event;switch(n.keyCode){case 38:m-=1;j();k(n);break;case 40:m+=1;j();k(n);break}})})();var d=userLoginState.isLogin();if(!d){$(".open_login_layer").bind("click",function(){loginLayer.show()})}$(".upload_anli").bind("click",function(){if(!d){loginLayer.show()}else{location.href="/anli/add/"}});$(".upload_pic").bind("click",function(){if(!d){loginLayer.show()}else{location.href="/zhuanji/add/"}})});;$(document).ready(function(){try{if(User&&userLoginState.isLogin()){var a=User.user_info,b=(a.user_id,$(".message >ul > li"));if(a){{a.avatar30}$(".login_user_avatar_50").attr("src",a.avatar30)}var c=User.msg;if(c){var d=c.system,e=c.likeme,f=c.joinme,g=c.commentme,h=d+e+f+g;h>0&&(0!=d&&b.eq(0).find("em").html("("+(d>99?"99+":d)+")"),0!=e&&b.eq(1).find("em").html("("+(e>99?"99+":e)+")"),0!=g&&b.eq(3).find("em").html("("+(g>99?"99+":g)+")"),(0!=f||0!=f)&&b.eq(2).find("em").html("("+(f>99?"99+":f)+")"))}}}catch(i){alert("出现异常，请重新刷新")}});;!function(){String.prototype.strToChars=function(){for(var a=new Array,b=0;b<this.length;b++)a[b]=[this.substr(b,1),this.isCHS(b)];return String.prototype.charsArray=a,a},String.prototype.isCHS=function(a){return this.charCodeAt(a)>255||this.charCodeAt(a)<0?!0:!1},String.prototype.subCHString=function(a,b){var c=0,d="";this.strToChars();for(var e=0;e<this.length;e++){if(this.charsArray[e][1]?c+=2:c++,c>b)return d;c>a&&(d+=this.charsArray[e][0])}return d},String.prototype.subCHStr=function(a,b){return this.subCHString(a,a+b)},String.prototype.getWordNumber=function(){var a=this.replace(/[^\x00-\xff]/g,"**");return Math.ceil(a.length/2)}}(),function(a){a.fn.extend({tags:function(b,c){var d=(a(this),{}),b=a.extend(d,b);return c&&c(),this.each(function(){var c=b,d=a(this),e=1,f={};f.encodeTag=function(a,b){return b?a=a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\//g,""):null,a},f.decodeTag=function(b,c){return b=a.trim(b.replace(/\&lt\;/g,"<").replace(/\&gt\;/g,">")),c?b=b.replace(/\//g,""):null,b},f.createTag=function(b){var d=a(c.$tags_user.selector);return(e=d.length<c.maxTags?1:0)?(d.each(function(){var c=a(this);return c.text().replace(/\×$/,"")==b?(e=0,!1):void 0}),e?(a('<span class="tags"><em>'+b+'</em><a href="javascript:void(0)">×</a></span>').insertBefore(c.$input),c.success&&c.success(),e=a(c.$tags_user.selector).length<c.maxTags?1:0,c.$box_tags_system&&c.$tags_system&&c.$tags_system.each(function(){var d=a(this);return d.text()==b?(d.data("clicked",1).addClass(c.class_tags_system_checked),!1):void 0}),void 0):!1):!1},f.deletes=function(b){var d=b.text().replace(/\×$/,"");b.remove(),e=a(c.$tags_user.selector).length<c.maxTags?1:0,c.$box_tags_system&&c.$tags_system&&c.$tags_system.each(function(){var b=a(this);return b.text()==d?(b.data("clicked",0).removeClass(c.class_tags_system_checked),!1):void 0})},d.bind("click.focus",function(){c.$input.focus()}),c.$box_tags_system&&c.$tags_system&&c.$tags_system.bind("click.create",function(b){b.preventDefault(),b.stopPropagation();var d=a(this);e=a(c.$tags_user.selector).length<c.maxTags?1:0,e&&1!=d.data("clicked")&&f.createTag(d.text())}),d.delegate(c.$tags_user.selector+" > a","click.deletes",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),d=c.parent();f.deletes(d)}),c.$input.bind("keyup.tags",function(){var b=/\s/,d=a(this),e=d.val(),g=e,h=e.search(b);if(e.getWordNumber()>c.maxLabelLen&&(e=e.subCHStr(0,2*c.maxLabelLen),d.val(e)),0==h)e=a.trim(e),d.val(e);else if(h>0){valSplit=g.split(" ");for(var i=0;i<valSplit.length;i++)valSplit[i]&&f.encodeTag(valSplit[i]).length>0?f.createTag(valSplit[i].subCHStr(0,2*c.maxLabelLen)):null;d.val("")}}).bind("keydown.tags",function(b){var c=a(this),d=c.val(),e=d.length;if(!e&&8==b.keyCode){var f=c.prev().length>0?c.prev():null;f&&(f.find("a").click(),c.val(f.find("em").text().replace(/\×&/,"")+" "))}}).bind("blur.tags",function(){var b=a(this);b.val(b.val()+" "),b.trigger("keyup.tags")})})}})}(jQuery);;var binPickers={pick:{albumof16:function(){var a=$("#bin_albumSelect"),b=$("#bin_albumInfo"),c=$("#bin_albumList"),d=c.find("li"),e=$("#bin_creatAlbum"),f=$("#pickitArea").find(".error"),g=$("#bin_pickit"),h=e.find("input"),i=30;a.find(".thisOn").live("click",function(){b.show(),$("body").bind("click",function(){$("#bin_albumInfo").hide()}),$("#bin_creatAlbum,#lm_album_yzm").click(function(){return!1})}),a.find(":text").bind("blur",function(){{var a=$(this);a.position().left+2,a.position().top,a.height(),parseFloat(a.css("padding-left")),parseFloat(a.css("padding-top"))}}),a.find("button").bind("click",function(){f.addClass("tips").text(" ");var a=binPickers.data.encodeTag(h.val()),b=a.length?!0:!1;return b?tuku.common.getWordNumber(a)>i?(f.removeClass("tips").text(msg.BA0003),h.focus(),!1):(c.find("li").each(function(){$(this).find("a").html()==a&&(b=!1,f.removeClass("tips").text(msg.BA0010),h.focus())}),b&&binPickers.data.createAlbum(a),void 0):(f.removeClass("tips").text(msg.BA0002),h.focus(),!1)}),d.live("click",function(c){var d=$(this).find("a"),e=d.html(),h=d.attr("data-albumid"),i=d.attr("data-albumbeing"),j=d.attr("data-albummax"),k=$("#bin_albumList").attr("data-albumtype"),l=d.parent().parent();if(a.find(".thisOn a").html(e).attr({title:e,"data-sledid":h}),1==j)return f.removeClass("tips").text(msg.BPF024),g.data({"data-canSubmit":!1}),!1;if(!$("#bin_myWay").length&&1==i){var m;switch(k){case"1":m=msg.BPF025;break;case"2":m=msg.BPF026}return f.removeClass("tips").text(m),g.data({"data-canSubmit":!1}),!1}f.addClass("tips").text(" "),g.data({"data-canSubmit":!0}),c.originalEvent&&($("#bin_goodsPrice").val()?$("#bin_goodsPrice").focus().blur():null,$("#bin_goodsName").val()?$("#bin_goodsName").focus().blur():null),b.fadeOut(50,function(){l.prependTo("#bin_albumList")})}).live("mouseover",function(){$(this).addClass("liOn").siblings().removeClass("liOn")})},tags:function(a){var b=$("#bin_labelBox"),c=b.find(".userInput"),d=$("#bin_sysLabels"),e=d.find(".sysLabel"),f=b.find("a"),g=$("#pickitArea").find(".error"),h=10,i=10,j=f.length<h?!0:!1;b.bind("click",function(){c.focus()}),e.live("click",function(){j=f.length<h?!0:!1,j?($clickedOne=$(this),1!=$clickedOne.data("clicked")&&binPickers.data.createTag($(this).text(),a)):g.removeClass("tips").text(msg.BPF012)}),c.bind("keyup",function(){var b=/\s/,c=$(this).val(),d=$(this).val(),e=c.search(b);if(tuku.common.getWordNumber(c)>10&&(c=c.subCHStr(0,2*i),$(this).val(c)),0==e)c=$.trim(c),$(this).val(c);else if(e>0){valSplit=d.split(" ");for(var f=0;f<valSplit.length;f++)valSplit[f]&&binPickers.data.encodeTag(valSplit[f]).length>0?binPickers.data.createTag(valSplit[f],a):null;$(this).val("")}}).bind("keydown",function(a){var b=$(this),c=b.val(),d=c.length;if(!d&&8==a.keyCode){var e=b.prev().length>0?b.prev():null;if(e){{e.find("a").click()}b.val(e.find("em").text().replace(/\×/,"")+" ")}}}).bind("blur",function(){var a=c.position().left,b=c.position().top,d=parseFloat(c.css("padding-left")),e=parseFloat(c.css("padding-top")),f=parseFloat(c.css("margin-top"));c.next("txt.ext_txt").css({left:a+d,top:b+e+f})}).bind("focus",function(){{var a=c.position().left,d=c.position().top,e=parseFloat(c.css("padding-left")),f=parseFloat(c.css("padding-top")),g=parseFloat(c.css("margin-top"));b.find("a")}c.next("txt.ext_txt").css({left:a+e,top:d+f+g})}),f.live("click",function(){if("tagname"!=$(this).attr("class")){e=d.find(".sysLabel"),g.text(" ");var a=$(this),b=a.parent();e.each(function(){b.html().replace(/(<a .*?<\/a>)|(<A .*?<\/A>)/,"")==$(this).html()?$(this).removeClass("thisOn").removeData("clicked"):null}),b.parent().remove(),setTimeout(function(){c.focus()},20)}})},description:function(){var a,b=$("#bin_pickerDSP"),c=$("#bin_pickerDSP").find(".error>em"),d=500;b.find("textarea").bind("keyup",function(){var a=$(this).val(),b=d-tuku.common.getWordNumber(a);-1>=b?(c.removeClass("tips").text(0),a=a.subCHStr(0,2*d),$(this).val(a),$("#bin_pickit").removeData("data-canSubmit")):(c.addClass("tips").text(b),$("#bin_pickit").removeData("data-canSubmit"))}).bind("blur",function(){clearInterval(a);var b=$(this).val(),e=d-tuku.common.getWordNumber(b);0>e&&$("#bin_pickit").data("data-canSubmit",!1),c.removeClass("tips").text(e)}).bind("focus",function(){a=setInterval(e,300)});var e=function(){var a=b.find("textarea").val(),e=d-tuku.common.getWordNumber(a);e=0>e?0:e,c.removeClass("tips").text(e)}},otherInput:function(){var a=[];$("#bin_goodsName,#bin_goodsPrice,#bin_goodsUrl,#bin_goodsBand,#bin_albumName").each(function(){var b=$(this).attr("bin-must");1==b?a.push($(this)):null}),$("#bin_goodsName,#bin_goodsPrice,#bin_goodsUrl,#bin_goodsBand,#bin_albumName").bind("blur",function(){var b,c,d,e,f,g,h,i=$("#bin_pickit"),j=$("#pickitArea").find(".error"),k=$(this).attr("bin-must"),l=!0,m=$("#bin_goodsPrice");if("physical-url"!=i.attr("data-loadtype"))for(var n=0,o=a.length;o>n;n++)if(b=a[n].attr("bin-maxLen"),c=a[n].attr("bin-type"),e=a[n].val(),d=a[n].attr("id"),f=tuku.common.getWordNumber(e),h=c?f&&b>=f?binPickers.data.checkData({data:e,checkType:c}):!1:f&&b>=f?!0:!1,0==h){switch(l=h,d){case"bin_goodsName":g=f?msg.BP0008:msg.BP0007;break;case"bin_goodsPrice":g=msg.BP0009;break;case"bin_albumName":g=f?msg.BA0003:msg.BA0002}j.removeClass("tips").text(g),i.data("data-canSubmit",!1);break}if(l)if(b=$(this).attr("bin-maxLen"),k=$(this).attr("bin-must"),c=$(this).attr("bin-type"),d=$(this).attr("id"),e=$(this).val(),f="bin_goodsName"==d||"bin_albumName"==d?tuku.common.getWordNumber(e):e.length,"0"!=k||"0"==k&&f){if(f>b){switch(i.data("data-canSubmit",!1),d){case"bin_goodsName":g=msg.BP0008;break;case"bin_goodsPrice":g=msg.BP0009;break;case"bin_goodsUrl":g=msg.BP0010;break;case"bin_goodsBand":g=msg.BP0011;break;case"bin_albumName":g=msg.BA0003}return j.removeClass("tips").text(g),!1}if(h=binPickers.data.checkData({data:e,checkType:c}),!h){switch(i.data("data-canSubmit",!1),d){case"bin_goodsPrice":g=msg.BP0009}return j.removeClass("tips").text(g),!1}if(m>1){var p=m.val().split("."),q=parseFloat(m.val());p[1]?null:q+=".00",m.val(q)}j.removeClass("tips").text(" "),i.removeData("data-canSubmit")}else"0"==k&&(j.removeClass("tips").text(" "),i.removeData("data-canSubmit"))})},submitPicked:function(a,b){var c=$("#bin_pickit"),d=$("#pickitArea").find(".error");binPickers.pick.otherInput(),c.data("data-canSubmit",!1),1==a&&c.attr("data-loadtype","img-local").data({"data-canSubmit":!0,"data-imgID":"1111"});var e={type:"",pic_id:"",album_id:"",description:"",tags:"",user_open_type:""};c.bind("click",function(){$("#space select")[0]&&$("#space select")[0].value&&(e.space=$("#space select")[0].value);var f=$("#bin_labelBox").find(".userInput");if(f.val()&&f.val()!=msg.BPF027?binPickers.data.createTag(f.val()):null,f.val(""),$("#bin_pickerDSP").find("textarea").focus().blur(),0==a)var g=c.attr("data-loadtype").split("-")[0];var h=$("#bin_albumSelect").find(".thisOn a").attr("data-sledid"),i=($("#bin_albumSelect").find(".thisOn a").html(),"写点有营养的介绍吧"!=$("#bin_pickerDSP").find("textarea").val()?$("#bin_pickerDSP").find("textarea").val():""),j=c.data("data-canSubmit"),k=[];if(0==a&&!c.data("data-imgID"))return d.removeClass("tips").text(msg.BPF023),!1;if(e.type="img"==g?1:2,e.album_id=h,e.description=i,e.pic_id=c.data("data-imgID"),$("#bin_labelBox").find("a").each(function(){var a=$(this),b=a.parent(),c=b.clone(),d=c.find("a").remove().end().html();k.push(binPickers.data.decodeTag(d))}),e.tags=k.join(" "),k.length=0,$("#bin_shareButtons").find(":checkbox[name=share]:checked").each(function(){k.push($(this).attr("id").replace("pin_share",""))}),e.user_open_type=k.join(","),0==a)var g=c.attr("data-loadtype").split("-")[0];if(0==a){var l=c.attr("data-loadtype").split("-")[1];if("img"!=g){if("url"!=l){if($("#bin_goodsName").val()?$("#bin_goodsName").focus().blur():null,e.goods_title=$("#bin_goodsName").val(),$("#bin_goodsPrice").val()?$("#bin_goodsPrice").focus().blur():null,e.goods_price=$("#bin_goodsPrice").val(),e.goods_imgUrl=$("#bin_goodsImgUrl").val(),$("#bin_goodsUrl").val()?$("#bin_goodsUrl").focus().blur():null,e.goods_url=$("#bin_goodsUrl").val(),!e.goods_title)return d.removeClass("tips").text(msg.BP0007),!1;if(!e.goods_price)return d.removeClass("tips").text(msg.BP0009),!1}else e.goods_url=$("#bin_urlArea").find(":text").val();$("#bin_goodsBand").val()?$("#bin_goodsBand").focus().blur():null,e.goods_brand=$("#bin_goodsBand").val()}}if(e.captcha=$("#lm_allpub_yzm").find("input:text").val(),e.pi_id=b,0!=j){var j=c.data("data-canSubmit");if(j||void 0==j){var m="img"==g?1:2;binPickers.data.endSubmit(e,a,e.tags,m),0==a&&cookieOperate.setCookie("binPick_"+g,l,525600)}}})},changeYzm:function(a,b,c){a.preventDefault(),$(b).prev("img").attr("src",c)}},data:{getSome:function(a,b,c,d){var e=b?"POST":"GET",f=b?b:"",g={};return c=c?c:!1,$.ajax({url:a,dataType:"json",type:e,data:f,timeout:4e4,async:c,success:function(b){if((b+"").length>5)if("1"==b.state)g=(b.result+"").length>0?b.result:" ";else{var c=b.code,e=b.result;g.state=b.state,g.msg=b.msg,c?(g.code=c,"BP0017"==c&&(g.result=e)):g.code="null"}else a.indexOf("/index.php?app=Ajax&c=Pic_Add")>-1?alert("网络异常，请重新上传"):alert("网络异常，请重试"),g=!1;d?d(g):null},error:function(){a.indexOf("/index.php?app=Ajax&c=Pic_Add")>-1?alert("网络异常，请重新上传"):alert("网络异常，请重试"),g=!1,d?d(g):null}}),g},getForPic:function(a,b){var c="/index.php?app=Ajax&c=Pic_Add&a=init&method="+a+"&type="+b+"&time="+$.now(),d=binPickers.data.getSome(c,"","","",b);return d},getForAlbum:function(a,b){var c;return a?(c="/index.php?app=Ajax&c=Album_Edit&a=init&id="+b+"&time="+$.now(),data=binPickers.data.getSome(c)):(c="/index.php?app=Ajax&c=Album_Add&a=init&time="+$.now(),data=binPickers.data.getSome(c)),data},getForAddto16:function(a,b){var c="/index.php?app=Ajax&c=Pic_Add&a=init&method="+a+"&pi_id="+b+"&time="+$.now();return data=binPickers.data.getSome(c)},editForAddto16:function(a,b){var c="/index.php?app=Ajax&c=Pic_Add&a=ready&method="+a+"&pi_id="+b+"&time="+$.now();return data=binPickers.data.getSome(c)},reload_editAlbum:function(a){if(binPickers.data.reloadPushedTag(a.recomm_tag),$("#bin_albumName").val(a.name).focus().blur(),$("#bin_pickerDSP").find("textarea").val(a.description).focus().blur(),a.tags)for(var b=a.tags.split(" "),c=0,d=b.length;d>c;c++)b[c].length>0?binPickers.data.createTag(b[c]):null;setTimeout(function(){$("#bin_labelBox").find(".userInput").blur()},10)},reload_addto16:function(a,b){if(1==b){var c=$("#bin_imgArea").find("img"),d=a.url,e=a.width,f=a.height,g=160;if(g>=e&&g>=f)c.css({"margin-top":-f/2,"margin-left":-e/2});else if(e>f){var h=g*f/e;c.width(g).height(h).css({"margin-top":-h/2,"margin-left":-g/2})}else{var i=g*e/f;c.width(i).height(g).css({"margin-top":-g/2,"margin-left":-i/2})}c.attr("src",d)}if(binPickers.data.reloadAlbum(a.album,a.type,b,a.select_album),binPickers.data.reloadPushedTag(a.recomm_tag),binPickers.data.canBeUsed(a.is_create_album),$("#bin_pickerDSP").find("textarea").val(a.description).focus().blur(),a.tags)for(var j=a.tags.split(" "),k=0,l=j.length;l>k;k++)j[k].length>0?binPickers.data.createTag(j[k]):null;setTimeout(function(){$("#bin_labelBox").find(".userInput").blur()},10)},reloadAlbum:function(a,b,c,d){var e,f="",g=$("#bin_albumList"),h=27,i=8;$.each(a,function(a,b){var c=binPickers.data.encodeTag(b.name),d=b.being,g=b.max;b.last||(b.last=1),"1"==b.last?e=a:null,f+='<li><span><a href="javascript:void(0)" title="'+c+'" data-albumid="'+b.id+'" data-albumbeing="'+d+'" data-albummax="'+g+'">'+c+"</a></span></li>"}),a.length>i?g.height(i*h):g.height(a.length*h),b?g.attr("data-albumType",b):null,g.html(f),$("#bin_creatAlbum").find(":text").focus().blur(),1==c?g.find("li").eq(e).click():2==c&&g.find("a[data-albumid="+d+"]").click()},reloadPushedTag:function(a){if(a){var b="";a=a.split(" "),$.each(a,function(a,c){b+='<a href="javascript:void(0)" class="sysLabel" title="'+c+'">'+c+"</a>"}),$("#bin_sysLabels").html(b)}},createTag:function(a,b,c){var d=$("#bin_labelBox"),e=d.find(".userInput"),f=d.find("a"),g=$("#bin_sysLabels"),h=g.find(".sysLabel"),i=$("#pickitArea").find(".error"),j=9;if(a=binPickers.data.encodeTag($.trim(a)),f=d.find("a"),allowCreat=f.length<j?!0:!1,f.each(function(){binPickers.data.decodeTag($(this).parent().text()).replace(/\×/,"")==a&&(allowCreat=!1)}),b&&(allowCreat=c?!0:!1),allowCreat){if(h.each(function(){$(this).html()==a?$(this).addClass("thisOn").data("clicked",!0):null}),b){var k=c.IDType,l=c.id,m="/index.php?app=Ajax&c=Tag_Add&a=add&time="+$.now(),n={};n[k]=l,n.tag_name=a,n=binPickers.data.getSome(m,n);var o=n.code;return!n||o?{code:o}:{url:n}}a=binPickers.data.encodeTag(a,!0);var p=$('<span class="dft"><em>'+a+'<a href="javascript:void(0)">×</a></em></span>');return p.insertBefore(e),e.focus().blur().focus(),!0}return(allowCreat=f.length<j?!0:!1)?(e.focus().blur(),!0):(i.removeClass("tips").text(msg.BPF012),!1)},canBeUsed:function(a){var b=$("#bin_creatAlbum").find("button");"1"!=a?b.attr("disabled",!0):b.attr("disabled",!1)},createAlbum:function(a){a=binPickers.data.decodeTag(a);var b={name:a};$("#lm_album_yzm").is(":hidden")||(b.captcha=$("#lm_album_yzm").find("input:text").val());var c=$("#pickitArea").find(".error"),d="/index.php?app=Ajax&c=Album_Add&a=add&time="+$.now(),b=binPickers.data.getSome(d,b),e=b.code,f=$("#bin_albumList"),g=8;if(b&&!e){var h;h=b.id,$("#bin_creatAlbum").find(":text").val("").focus().blur(),$newLi=$('<li><span><a href="javascript:void(0)" data-albumid="'+h+'">1</a></span></li>'),$newLi.find("a").attr("title",a).text(a),$newLi.appendTo("#bin_albumList").click();var i=parseFloat($("#bin_albumList").find("li").css("line-height"));return $("#bin_albumList").find("li").length>=g?f.height(i*g):f.height(i*f.find("li").length),h}("BR0028"==e||"BR0029"==e)&&$("#lm_album_yzm").show().find("a").click(),c.removeClass("tips").text(msg[e])},endSubmit:function(a,b,c,d){$("#bin_ImagePicker").find(".pickitLoading").show();var e;0==b?e="/index.php?app=Ajax&c=Pic_Add&a=save&time="+$.now():1==b?e="/index.php?app=Ajax&c=Pic_Copy&a=copy&time="+$.now():2==b&&(e="/index.php?app=Ajax&c=Pic_Edit&a=edit&time="+$.now());var f=function(a){var c=a.code;if($("#bin_ImagePicker").find(".pickitLoading").hide(),a&&!c){if(1==$("#bin_shareto").length){var e=$("#bin_shareto").attr("checked")?"share":"noshare";cookieOperate.setCookie("shareNote",e,525600)}if(0==b){$("#bin_ImagePicker").find(".liu_close.jj_layerout_close").trigger("click",[!0]),d=1==d?"图片":"宝贝";var f=binPickers.data.createPicke(7,d);$.layerout({event:"",template:f,isCloseMask:!0,isClose:!1,isOverlay:!0,isHideScroll:!0,isShowScroll:!0,pos:{top:"50%",left:"50%"},size:["554px","auto"],onAfterLayerClose:function(){$(".content_pop").find(".cancel").trigger("click",[!0])}},function(){{var b=$("#pickSucc");$("#bin_ImagePicker")}$("<u></u>").insertAfter(b),b.children("a").eq(0).bind("click",function(){$("#bin_ImagePicker").find(".jj_layerout_close").trigger("click"),"图片"==d?$("#login_bar").find("ul a:eq(0)").click():"宝贝"==d&&$("#login_bar").find("ul a:eq(1)").click()}),b.children("a").eq(1).attr({href:a.href})})}else if(1==b||2==b){if(2==b)location.reload();else{var g=$(".collect_to_link").find(".collect_nums");nowNum=parseFloat(g.text())+1+"",g.text(nowNum)}$("#bin_ImagePicker").find(".liu_close.jj_layerout_close").trigger("click",[!0])}}else $("#pickitArea").find(".error").removeClass("tips").text(msg[c]),"BR0028"!=c&&"BR0029"!=c&&$("#lm_allpub_yzm").is(":hidden")||$("#lm_allpub_yzm").show().find("a").click()};data=binPickers.data.getSome(e,a,!0,f)},checkData:function(a){var b=a.data,c=a.checkType?a.checkType:null;if(c){var d={price:/^(\d{1,9}(\.\d{1,2})?$)|(\d{10}(\.\d{1})?$)/};return d[c].test(b)}return!0},deletePic:function(a){$(".detail_like_edit_load").removeClass("dpn");var b="/index.php?app=Ajax&c=Pic_Del&a=del";a=binPickers.data.getSome(b,a),code=a.code,$(".detail_like_edit_load").addClass("dpn"),a&&!code&&(location.href=a.next_url)},encodeTag:function(a,b){return b?a=a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\//g,""):null,a},decodeTag:function(a,b){return a=$.trim(a.replace(/\&lt\;/g,"<").replace(/\&gt\;/g,">")),b?a=a.replace(/\//g,""):null,a}}};;jQuery(function(a){a("#tagsInput").bind("focus",function(){$input=a(this),a("#bin_sysLabels_setting").parent(".bin_sysLabels").show()}),a("#settingTagInput").bind("click",function(){a("#tagsInput").focus()}),a("#settingTagInput").find("span a").live("click",function(){if(a(".person_lable_wrap").find(".error_tip_info").hide(),"tagname"!=a(this).attr("class")){var b=(a("#bin_sysLabels"),a("#bin_sysLabels_setting").find("a")),c=a("#pickitArea").find(".error");c.text(" ");var d=a(this),e=d.parent();b.each(function(){e.html().replace(/(<a .*?<\/a>)|(<A .*?<\/A>)/,"")==a(this).html()?a(this).removeClass("thisOn").removeData("clicked"):null}),e.parent().remove(),a("#tagsInput").focus()}}),a("#bin_sysLabels_setting").find("a").live("click",function(){var b=10,c=(a(".detail_tab").find(".bin_labelBox"),a(".person_lable_wrap").find(".error_tip_info"));if(allowCreat=a("#settingTagInput").children("span").length<b?!0:!1){var d=a(this);if(1!=d.data("clicked")){var e=binPickers.data.createTag(a(this).html());e&&(a("<span><em>"+a(this).html()+"<a href=javascript:void(0)>×</a></em></span>").insertBefore("#tagsInput"),d.data("clicked",!0))}}else c.show()}),a("#tagsInput").live("keyup",function(){var b=a("#settingTagInput").find("span");if(maxLabel=10,maxLabelLen=5,allowCreat=b.length<maxLabel?!0:!1,$error=a(".person_lable_wrap").find(".error_tip_info"),allowCreat){$error.hide();var c=/\s/,d=a(this).val(),e=a(this).val(),f=d.search(c);if(tuku.common.getWordNumber(d)>maxLabelLen&&(d=d.subCHStr(0,2*maxLabelLen),a(this).val(d)),0==f)d=a.trim(d),a(this).val(d);else if(f>0){valSplit=e.split(" ");for(var g=0;g<valSplit.length;g++)if(valSplit[g]&&valSplit[g].length>0){var h=valSplit[g];b.each(function(){a(this).find("em").html().replace(/(<a .*?<\/a>)|(<A .*?<\/A>)/,"")==h&&(allowCreat=!1)}),h=binPickers.data.encodeTag(h),h&&allowCreat&&a("<span><em>"+h+"<a href=javascript:void(0)>×</a></em></span>").insertBefore(a(this))}a(this).val("")}}else $error.show(),a(this).val("")}).live("keydown",function(b){var c=a(this),d=c.val(),e=d.length;if(!e&&8==b.keyCode){var f=c.prev().length>0?c.prev():null;f&&(c.val(f.find("em").text().replace(/\×/,"")+" "),f.find("a").click())}}).live("blur",function(){var b=a(this),c=b.position().left,d=b.position().top,e=parseFloat(b.css("padding-left")),f=parseFloat(b.css("padding-top"));b.next("txt.ext_txt").css({left:c+e,top:d+f})}),a(".edit-option-btn").bind("click",function(){var b=binPickers.data.createPicke(4,"编辑图片"),c=a.parseJSON(a(this).closest(".options").attr("data").replace(/'/g,'"')).pid,d=binPickers.data.editForAddto16(2,c),e="";return d.space&&d.spacelist&&a(d.spacelist).each(function(a,b){for(key in b)e+="<option value='"+key+"'>"+b[key]+"</option>"}),userLoginState.isLogin()?(0!=d.state?a.layerout({event:"",template:b,isCloseMask:!0,isClose:!1,isOverlay:!0,isHideScroll:!0,isShowScroll:!0,pos:{top:"50%",left:"50%"},size:["466px","auto"],onAfterLayerClose:function(){a(".content_pop").find(".cancel").trigger("click",[!0])}},function(){binPickers.pick.albumof16(),binPickers.pick.tags(),binPickers.pick.description(),binPickers.pick.submitPicked(2,c),gj.changeColor(a("#bin_labelBox .userInput,#bin_creatAlbum :text,#bin_pickerDSP textarea")),binPickers.data.reload_addto16(d,2),e&&a("#bin_pinForm ul > li:eq(0)").after("<li class=clearfix id=space><label>空间</label><div class=lbRight><select>"+e+"</select></div></li>")}):alert(d.msg),void 0):!1}),a(".delete-option-btn").bind("click.del",function(){var b=a.parseJSON(a(this).closest(".options").attr("data").replace(/'/g,'"')).pid,c=a(this);tuku.hip_pop.popView(a(this),msg.BP0034,function(){c.unbind("click.del"),binPickers.data.deletePic({pi_id:b})})})});;var sldata={prov0:"城市/地区",code0:"0",prov34:"合肥,芜湖,蚌埠,淮南,马鞍山,淮北,铜陵,安庆,黄山,滁州,阜阳,宿州,巢湖,六安,亳州,池州,宣城",code34:"1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17,18",prov11:"北京",code11:"1",prov50:"重庆",code50:"1",prov35:"福州,厦门,莆田,三明,泉州,漳州,南平,龙岩,宁德",code35:"1,2,3,4,5,6,7,8,9",prov62:"兰州,嘉峪关,金昌,白银,天水,武威,张掖,平凉,酒泉,庆阳,定西,陇南,临夏,甘南",code62:"1,2,3,4,5,6,7,8,9,10,24,26,29,30",prov44:"广州,韶关,深圳,珠海,汕头,佛山,江门,湛江,茂名,肇庆,惠州,梅州,汕尾,河源,阳江,清远,东莞,中山,潮州,揭阳,云浮",code44:"1,2,3,4,5,6,7,8,9,12,13,14,15,16,17,18,19,20,51,52,53",prov45:"南宁,柳州,桂林,梧州,北海,防城港,钦州,贵港,玉林,百色,贺州,河池,来宾,崇左",code45:"1,22,3,4,5,6,7,8,9,10,11,12,13,14",prov52:"贵阳,六盘水,遵义,安顺,铜仁,黔西南,毕节,黔东南,黔南",code52:"1,2,3,4,22,23,24,26,27",prov46:"海口,三亚,其他",code46:"1,2,90",prov13:"石家庄,唐山,秦皇岛,邯郸,邢台,保定,张家口,承德,沧州,廊坊,衡水",code13:"1,2,3,4,5,6,7,8,9,10,11",prov23:"哈尔滨,齐齐哈尔,鸡西,鹤岗,双鸭山,大庆,伊春,佳木斯,七台河,牡丹江,黑河,绥化,大兴安岭",code23:"1,2,3,4,5,6,7,8,9,10,11,12,27",prov41:"郑州,开封,洛阳,平顶山,安阳,鹤壁,新乡,焦作,濮阳,许昌,漯河,三门峡,南阳,商丘,信阳,周口,驻马店,济源",code41:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18",prov42:"武汉,黄石,十堰,宜昌,襄阳,鄂州,荆门,孝感,荆州,黄冈,咸宁,随州,恩施土家族苗族自治州,仙桃,潜江,天门,神农架",code42:"1,2,3,5,6,7,8,9,10,11,12,13,28,29,30,31,32",prov43:"长沙,株洲,湘潭,衡阳,邵阳,岳阳,常德,张家界,益阳,郴州,永州,怀化,娄底,湘西土家族苗族自治州",code43:"1,2,3,4,5,6,7,8,9,10,11,12,13,31",prov15:"呼和浩特,包头,乌海,赤峰,通辽,鄂尔多斯,呼伦贝尔,兴安盟,锡林郭勒盟,乌兰察布盟,巴彦淖尔盟,阿拉善盟",code15:"1,2,3,4,5,6,7,22,25,26,28,29",prov32:"南京,无锡,徐州,常州,苏州,南通,连云港,淮安,盐城,扬州,镇江,泰州,宿迁",code32:"1,2,3,4,5,6,7,8,9,10,11,12,13",prov36:"南昌,景德镇,萍乡,九江,新余,鹰潭,赣州,吉安,宜春,抚州,上饶",code36:"1,2,3,4,5,6,7,8,9,10,11",prov22:"长春,吉林,四平,辽源,通化,白山,松原,白城,延边朝鲜族自治州",code22:"1,2,3,4,5,6,7,8,24",prov21:"沈阳,大连,鞍山,抚顺,本溪,丹东,锦州,营口,阜新,辽阳,盘锦,铁岭,朝阳,葫芦岛",code21:"1,2,3,4,5,6,7,8,9,10,11,12,13,14",prov64:"银川,石嘴山,吴忠,固原,中卫",code64:"1,2,3,4,5",prov63:"西宁,海东,海北,黄南,海南,果洛,玉树,海西",code63:"1,21,22,23,25,26,27,28",prov14:"太原,大同,阳泉,长治,晋城,朔州,晋中,运城,忻州,临汾,吕梁",code14:"1,2,3,4,5,6,7,8,9,10,23",prov37:"济南,青岛,淄博,枣庄,东营,烟台,潍坊,济宁,泰安,威海,日照,莱芜,临沂,德州,聊城,滨州,菏泽",code37:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17",prov31:"上海",code31:"1",prov51:"成都,自贡,攀枝花,泸州,德阳,绵阳,广元,遂宁,内江,乐山,南充,眉山,宜宾,广安,达州,雅安,巴中,资阳,阿坝,甘孜,凉山",code51:"1,3,4,5,6,7,8,9,10,11,13,14,15,16,17,18,19,20,32,33,34",prov12:"天津",code12:"1",prov54:"拉萨,昌都,山南,日喀则,那曲,阿里,林芝",code54:"1,21,22,23,24,25,26",prov65:"乌鲁木齐,克拉玛依,吐鲁番,哈密,昌吉,博尔塔拉,巴音郭楞,阿克苏,克孜勒苏,喀什,和田,伊犁,塔城,阿勒泰,石河子",code65:"1,2,21,22,23,27,28,29,30,31,32,40,42,43,44",prov53:"昆明,曲靖,玉溪,保山,昭通,楚雄,红河,文山,思茅,西双版纳,大理,德宏,丽江,怒江,迪庆,临沧",code53:"1,3,4,5,6,23,25,26,27,28,29,31,32,33,34,35",prov33:"杭州,宁波,温州,嘉兴,湖州,绍兴,金华,衢州,舟山,台州,丽水",code33:"1,2,3,4,5,6,7,8,9,10,11",prov61:"西安,铜川,宝鸡,咸阳,渭南,延安,汉中,榆林,安康,商洛",code61:"1,2,3,4,5,6,7,8,9,10",prov71:"台北市,高雄市,基隆市,台中市,台南市,新竹市,嘉义市,台北县,宜兰县,桃园县,新竹县,苗栗县,台中县,彰化县,南投县,云林县,嘉义县,台南县,高雄县,屏东县,澎湖县,台东县,花莲县,其他",code71:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,90",prov81:"中西区,东区,九龙城区,观塘区,南区,深水埗区,黄大仙区,湾仔区,油尖旺区,离岛区,葵青区,北区,西贡区,沙田区,屯门区,大埔区,荃湾区,元朗区,其他",code81:"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,1",prov82:"花地玛堂区,圣安多尼堂区,大堂区,望德堂区,风顺堂区,氹仔,路环,其他",code82:"2,3,4,5,6,7,8,1",prov400:"美国,英国,法国,俄罗斯,加拿大,巴西,澳大利亚,印尼,泰国,马来西亚,新加坡,菲律宾,越南,印度,日本,新西兰,韩国,德国,意大利,爱尔兰,荷兰,瑞士,乌克兰,南非,芬兰,瑞典,奥地利,西班牙,比利时,挪威,丹麦,波兰,阿根廷,白俄罗斯,哥伦比亚,古巴,埃及,希腊,匈牙利,伊朗,蒙古,墨西哥,葡萄牙,沙特阿拉伯,土耳其,其他",code400:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,16",prov100:"",code100:"",provinces:"安徽,北京,重庆,福建,甘肃,广东,广西,贵州,海南,河北,黑龙江,河南,湖北,湖南,内蒙古,江苏,江西,吉林,辽宁,宁夏,青海,山西,山东,上海,四川,天津,西藏,新疆,云南,浙江,陕西,台湾,香港,澳门,海外,其他",provcodes:"34,11,50,35,62,44,45,52,46,13,23,41,42,43,15,32,36,22,21,64,63,14,37,31,51,12,54,65,53,33,61,71,81,82,400,100"},loadProCity={init:function(){var a=document.getElementById("province"),b=document.getElementById("city"),c=$(a).attr("data-init"),d=$(b).attr("data-init");loadProCity.loadPro(),a.onchange=function(){loadProCity.loadCity(this.value)},$(a).find("option[value='"+c+"']").attr("selected","selected"),loadProCity.loadCity(a.value),$(b).find("option[value='"+d+"']").attr("selected","selected")},loadPro:function(){var a=1,b=sldata.provinces.split(","),c=sldata.provcodes.split(","),d=document.getElementById("province");d[0]=new Option("请选择","0");for(var e=0,f=b.length;f>e;e++)d[a]=new Option(b[e],c[e]),a++},loadCity:function(a){var b,c,d=1,e=document.getElementById("city");if(e.options.length=0,0==a)return e[0]=new Option("","0"),void 0;b=sldata["prov"+a].split(","),c=sldata["code"+a].split(","),e[0]=new Option("请选择","0");for(var f=0,g=b.length;g>f;f++)e[d]=new Option(b[f],c[f]),d++}},Validate=function(a){this.submit=a.submit,this.error=a.error,this.row=a.row,this.info=a.info,this.infos=a.infos,this.rules=a.rules,this.callback=a.callback,this.errors={},this.isSubmit=!1,this.isSubmited=!0,this.init()};Validate.prototype={init:function(){this.operateInput("bind"),this.bindSubmit()},operateInput:function(a){var b,c,d,e=this.rules,f=this.infos;for(c in e)if(e.hasOwnProperty(c)){if(b=$(c),!b.length)continue;"bind"===a?(this.bindInputFocusCheck(b,c),this.bindInputBlurCheck(b,c)):b.blur()}for(d in f)if(f.hasOwnProperty(d)){if(b=$(d),!b.length)continue;"bind"===a&&(this.bindInputFocusInfo(b,d),this.bindInputBlurInfo(b,d))}},bindSubmit:function(){var a=this;$(this.submit).click(function(){return a.operateInput("blur"),a.lookForError(),a.isSubmited&&a.isSubmit&&a.callback&&(a.isSubmited=!1,a.callback(function(){a.isSubmited=!0})),!1})},bindInputFocusCheck:function(a,b){var c=(this.infos[b],this);a.focus(function(){c.setError(a,"")})},bindInputFocusInfo:function(a,b){var c=this.infos[b],d=this;a.focus(function(){d.setInfo(a,c)})},bindInputBlurCheck:function(a,b){var c=this,d=this.rules[b];a.is('[type="checkbox"]')&&(a=a.eq(0)),a.blur(function(){var a,e,f,g=$(this);for(e=0,f=d.length;f>e;e+=1){if(a=d[e],c.errors[b]=a.func.apply(g,[$.trim(g.val())].concat(a.params)),c.errors[b]&&a.error){c.setError(g,a.error);break}c.setError(g,"")}})},bindInputBlurInfo:function(a){var b=this;a.blur(function(){b.setInfo($(this),"")})},lookForError:function(){var a;for(a in this.errors)if(this.errors.hasOwnProperty(a)&&this.errors[a])return this.isSubmit=!1,void 0;this.isSubmit=!0},setTxt:function(a,b,c){b?a.parents(this.row).find(c).show().find(".cont").html(b):a.parents(this.row).find(c).hide().find(".cont").html(b)},setInfo:function(a,b){this.setTxt(a,b,this.info)},setError:function(a,b){this.setTxt(a,b,this.error)}};var tip,successTipHtml,loadHtml='<span  class="pass_tip_icon load_tip_icon"></span>',sendError=function(a){alert(a?a:"系统繁忙！"),location.reload()},sendLoad=function(){tip=$("#saveSuccTip"),successTipHtml=tip.html(),tip.html(loadHtml).show()},sendSuccess=function(){tip.html(successTipHtml)},settingBase=function(){loadProCity.init();var a="/index.php?app=Ajax&m=User_Register&a=checkNickName&nickname=",b="/index.php?app=Ajax&m=User_SettingBase&act=normal",c=!1,d=function(){function a(){var a="";$("#settingTagInput").find("span").each(function(b,c){a+=binPickers.data.encodeTag($.trim($(c).text()).replace(/×$/,""))+" "}),$("#personTags").attr("value",$.trim(a))}return sendLoad(),a(),$.ajax({type:"POST",url:b,data:$("#settingBaseForm").serialize(),dataType:"json",success:function(a){a.state?(sendSuccess(),setTimeout(function(){location.reload()},200)):sendError(a.msg)},error:function(){}}),!1},e=function(b){var d;if(!c)return $.ajax({type:"GET",async:!1,url:a+b,dataType:"json",success:function(a){c=!0,d=1===a.state&&"AX0001"===a.code?!1:!0},error:function(){}}),d};new Validate({submit:"#submit",error:".form-error",info:".form-info",row:".form-row",infos:{"#nickname":'1-15个字符，支持中英文、数字、"-"、"_"',"#tagsInput":"多个标签请用空格隔开，最多10个标签"},rules:{"#nickname":[{func:rgl.checkisNull,error:"请填写昵称"},{func:rgl.checkText,error:'昵称仅支持中英文、数字、"-"、"_"'},{func:rgl.checkMaxLen,params:[30],error:"不能超过15个字"},{func:e,error:"此昵称已被注册，换一个试试吧"}],"#phone":[{func:rgl.checkisNull},{func:rgl.checkTel,error:"含有非法字符，或者 超过11个字符"}],"#village":[{func:rgl.checkisNull},{func:rgl.checkMaxLen,params:[30],error:"不能超过15个字"}],"#description":[{func:rgl.checkMaxLen,params:[140],error:"介绍太长了，最多70个字"}]},callback:d})},settingProfession=function(){loadProCity.init();var a='<div id="j-save-success" class="login_layer save-success">    <h3 class="layer_title"><span>资料保存成功</span></h3>    <div class="content clearfix"><p>       亲爱的用户：       </p><p>      你好！工作人员会在5-7个工作日的9:00—18:00期间致电给你确认身份认证 ，请保持手机通畅。       </p>        <p>            如有疑问，请在工作日拨打010-58951697垂询。        </p>             <div class="save-success-next">            <a class="login_btn" href="/zhuanji/add/"><span>上传作品</span></a><a class="login_btn" href="/jia"><span>去我的主页</span></a>        </div>    </div>    <a href="javascript:;" class="layer_close jj_layerout_close">×</a></div>',b="/index.php?app=Ajax&mod=User_SettingBase&act=business",c=function(c){function d(){var a="";$("#settingTagInput").find("span").each(function(b,c){a+=binPickers.data.encodeTag($.trim($(c).text()).replace(/×$/,""))+" "}),$("#personTags").attr("value",$.trim(a))}return sendLoad(),d(),$.ajax({type:"POST",url:b,data:$("#settingBaseForm").serialize(),dataType:"json",success:function(b){b.state?(sendSuccess(),setTimeout(function(){tip.hide()},200),$.layerout({event:"",template:a,pos:{top:"50%",left:"50%"},isCloseMask:!0,isClose:!1,isOverlay:!0,isFixed:!0,size:["580px","auto"]}),c&&c()):sendError(b.msg)},error:function(){}}),!1},d=function(){return!this.parents(".form-row").find('input[type="checkbox"]').is(":checked")};new Validate({submit:"#submit",error:".form-error",info:".form-info",row:".form-row",infos:{"#tagsInput":"多个标签请用空格隔开，最多10个标签"},rules:{"#true-name":[{func:rgl.checkisNull,error:"请填写真实姓名或者公司名称"},{func:rgl.checkMaxLen,params:[30],error:"不能超过15个字"}],"#phone":[{func:rgl.checkisNull,error:"请填写手机号码"},{func:rgl.checkTel,error:"仅支持11位数字，且以13/14/15/18开头"}],"#qq":[{func:rgl.checkisNull,error:"请填写QQ号码"}],"#credentials":[{func:rgl.checkisNull,error:"请上传资质证明"}],'input[name="service_item[]"]':[{func:d,error:"请选择服务内容"}],"#cover":[{func:rgl.checkisNull,error:"请上传个人封面"}],"#description":[{func:rgl.checkMaxLen,params:[500],error:"不能超过250个字"}],"#working_experience":[{func:rgl.checkMaxLen,params:[500],error:"不能超过250个字"}]},callback:c})};;var upload=function(){var a,b,c,d,e,f,g=",",h=CONFIG.vfs_url,i=0,j={init:function(a){d=a},set:function(){a=d.customSettings.maxUploadNum,b=d.customSettings.btnDefaultUrl,c=d.customSettings.btnLimitUrl,e=$("#"+d.customSettings.previewId),f=$("#"+d.customSettings.inputId),d.setButtonImageURL(b),j.bindDeleteImg(),j.handleTooMoreImg()},getFileSIze:function(){return e.find("li").length},handleTooMoreImg:function(){return j.getFileSIze()>=a?(d.setButtonDisabled(!0),d.setButtonCursor(SWFUpload.CURSOR.ARROW),d.setButtonImageURL(c),!1):(d.setButtonDisabled(!1),d.setButtonCursor(SWFUpload.CURSOR.HAND),d.setButtonImageURL(b),!0)},deleteImg:function(){var a=$(this).attr("file_id"),b=$("#"+a);0===b.length&&(b=$(this).parents("li"));var c,d=b.find(".upload_img img").attr("src").replace(h,""),e=f.val().split(g),i=e.length;for(c=0;i>c;c+=1)if(e[c]===d){e.splice(c,1);break}f.val(e.join(",")),b.remove(),j.handleTooMoreImg()},bindDeleteImg:function(){e.delegate(".input_delete_ico","click",j.deleteImg)},fileQueued:function(b){if(!j.handleTooMoreImg())return 0===i&&alert("最多能上传"+a+"张图片！"),i=1,void 0;var c='<li class="clearfix" id="'+b.id+'">        <div class="pic">            <div class="upload_img">                <img src="http://static.jiaju.com/jiaju/com/images/jiaju_show/common/loading.gif" title="" alt="">            </div><a href="javascript:;" file_id="'+b.id+'" class="input_delete_ico" title="删除">×</a>        </div>    </li>';e.append(c)},fileDialogComplete:function(){this.startUpload()},uploadStart:function(){},uploadComplete:function(){this.startUpload()},uploadSuccess:function(a,b){var c,d,e;b=$.parseJSON(b),b&&b.state&&(e=$("#"+a.id).find(".upload_img img"),c=b.result["160x160"].path,e.attr("src",h+c),f.val()?(d=f.val(),f.val(d+g+c)):f.val(c)),j.handleTooMoreImg()},fileQueueError:function(a,b){switch(b){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:alert("大小不超过4M，支持jpg、jpeg、png、gif格式！");break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:alert("大小不超过4M，支持jpg、jpeg、png、gif格式！");break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:alert("大小不超过4M，支持jpg、jpeg、png、gif格式！")}return!1},uploadError:function(a,b){switch(b){case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:}},flashReady:function(){j.set()}};return j},uploadMore=function(){var a=10;SWFUpload.WINDOW_MODE={WINDOW:"opaque",TRANSPARENT:"transparent",OPAQUE:"opaque"};var b=upload(),c=new SWFUpload({upload_url:CONFIG.photo_upload_credentials_url,post_params:CONFIG.photo_upload_post_params,file_queue_limit:0,file_upload_limit:0,file_size_limit:"4MB",file_types:"*.jpg;*.gif;*.png",file_types_description:"Image Files",button_action:SWFUpload.BUTTON_ACTION.SELECT_FILES,swfupload_loaded_handler:b.flashReady,file_queued_handler:b.fileQueued,file_queue_error_handler:b.fileQueueError,file_dialog_complete_handler:b.fileDialogComplete,upload_start_handler:b.uploadStart,upload_error_handler:b.uploadError,upload_success_handler:b.uploadSuccess,upload_complete_handler:b.uploadComplete,flash_url:"http://static.jiaju.com/jiaju/com/images/jiaju_show/common/swfupload.swf",button_cursor:SWFUpload.CURSOR.HAND,button_width:76,button_height:21,button_placeholder_id:"upload_choose1",custom_settings:{previewId:"pic20_list1",maxUploadNum:a,inputId:"credentials",btnDefaultUrl:"http://zx.jiaju.sina.com.cn/images/setting-upload-btn.png",btnLimitUrl:"http://zx.jiaju.sina.com.cn/images/setting-upload-forbid-btn.png"},debug:!1});b.init(c)},uploadOne=function(){var a=1;SWFUpload.WINDOW_MODE={WINDOW:"opaque",TRANSPARENT:"transparent",OPAQUE:"opaque"};var b=upload(),c=new SWFUpload({upload_url:CONFIG.photo_upload_url,post_params:CONFIG.photo_upload_post_params,file_queue_limit:0,file_upload_limit:0,file_size_limit:"4MB",file_types:"*.jpg;*.gif;*.png",file_types_description:"Image Files",button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,swfupload_loaded_handler:b.flashReady,file_queued_handler:b.fileQueued,file_queue_error_handler:b.fileQueueError,file_dialog_complete_handler:b.fileDialogComplete,upload_start_handler:b.uploadStart,upload_error_handler:b.uploadError,upload_success_handler:b.uploadSuccess,upload_complete_handler:b.uploadComplete,flash_url:"http://static.jiaju.com/jiaju/com/images/jiaju_show/common/swfupload.swf",button_cursor:SWFUpload.CURSOR.HAND,button_width:76,button_height:21,button_placeholder_id:"upload_choose",custom_settings:{previewId:"pic20_list",maxUploadNum:a,inputId:"cover",btnDefaultUrl:"http://zx.jiaju.sina.com.cn/images/setting-upload-btn.png",btnLimitUrl:"http://zx.jiaju.sina.com.cn/images/setting-upload-forbid-btn.png"},debug:!1});b.init(c)};$(window).load(function(){uploadMore(),uploadOne()});;var SWFUpload;void 0==SWFUpload&&(SWFUpload=function(a){this.initSWFUpload(a)}),SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings=a,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(b){throw delete SWFUpload.instances[this.movieName],b}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(a){if("string"!=typeof a||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var b=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.pathname.lastIndexOf("/"));return path=0>=b?"/":window.location.pathname.substr(0,b)+"/",path+a},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(a,b){this.settings[a]=void 0==this.settings[a]?b:this.settings[a]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var a,b;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==a)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div"),b.innerHTML=this.getFlashHTML(),a.parentNode.replaceChild(b.firstChild,a),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var a=this.buildParamString(),b=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(b),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(a),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params,b=[];if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c.toString())+"="+encodeURIComponent(a[c].toString()));return b.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if(a=this.getMovieElement(),a&&"unknown"==typeof a.CallFunction){for(var b in a)try{"function"==typeof a[b]&&(a[b]=null)}catch(c){}try{a.parentNode.removeChild(a)}catch(d){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(e){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n"," ","upload_url:               ",this.settings.upload_url,"\n"," ","flash_url:                ",this.settings.flash_url,"\n"," ","use_query_string:         ",this.settings.use_query_string.toString(),"\n"," ","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n"," ","http_success:             ",this.settings.http_success.join(", "),"\n"," ","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n"," ","file_post_name:           ",this.settings.file_post_name,"\n"," ","post_params:              ",this.settings.post_params.toString(),"\n"," ","file_types:               ",this.settings.file_types,"\n"," ","file_types_description:   ",this.settings.file_types_description,"\n"," ","file_size_limit:          ",this.settings.file_size_limit,"\n"," ","file_upload_limit:        ",this.settings.file_upload_limit,"\n"," ","file_queue_limit:         ",this.settings.file_queue_limit,"\n"," ","debug:                    ",this.settings.debug.toString(),"\n"," ","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n"," ","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n"," ","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n"," ","button_image_url:         ",this.settings.button_image_url.toString(),"\n"," ","button_width:             ",this.settings.button_width.toString(),"\n"," ","button_height:            ",this.settings.button_height.toString(),"\n"," ","button_text:              ",this.settings.button_text.toString(),"\n"," ","button_text_style:        ",this.settings.button_text_style.toString(),"\n"," ","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n"," ","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n"," ","button_action:            ",this.settings.button_action.toString(),"\n"," ","button_disabled:          ",this.settings.button_disabled.toString(),"\n"," ","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n"," ","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n"," ","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n"," ","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n"," ","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n"," ","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n"," ","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n"," ","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n"," ","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n"," ","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n"," ","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(a,b,c){return this.settings[a]=void 0==b?c:b},SWFUpload.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])},SWFUpload.prototype.cancelUpload=function(a,b){b!==!1&&(b=!0),this.callFlash("CancelUpload",[a,b])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])},SWFUpload.prototype.getFile=function(a){return"number"==typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])},SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])},SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])},SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString(),this.callFlash("SetUploadURL",[a])},SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a,this.callFlash("SetPostParams",[a])},SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a,this.settings.file_types_description=b,this.callFlash("SetFileTypes",[a,b])},SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a,this.callFlash("SetFileSizeLimit",[a])},SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a,this.callFlash("SetFileUploadLimit",[a])},SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a,this.callFlash("SetFileQueueLimit",[a])},SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a,this.callFlash("SetFilePostName",[a])},SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a,this.callFlash("SetUseQueryString",[a])},SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a,this.callFlash("SetRequeueOnError",[a])},SWFUpload.prototype.setHTTPSuccess=function(a){"string"==typeof a&&(a=a.replace(" ","").split(",")),this.settings.http_success=a,this.callFlash("SetHTTPSuccess",[a])},SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a,this.callFlash("SetAssumeSuccessTimeout",[a])},SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a,this.callFlash("SetDebugEnabled",[a])},SWFUpload.prototype.setButtonImageURL=function(a){void 0==a&&(a=""),this.settings.button_image_url=a,this.callFlash("SetButtonImageURL",[a])},SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a,this.settings.button_height=b;var c=this.getMovieElement();void 0!=c&&(c.style.width=a+"px",c.style.height=b+"px"),this.callFlash("SetButtonDimensions",[a,b])},SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a,this.callFlash("SetButtonText",[a])},SWFUpload.prototype.setButtonTextPadding=function(a,b){this.settings.button_text_top_padding=b,this.settings.button_text_left_padding=a,this.callFlash("SetButtonTextPadding",[a,b])},SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a,this.callFlash("SetButtonTextStyle",[a])},SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a,this.callFlash("SetButtonDisabled",[a])},SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a,this.callFlash("SetButtonAction",[a])},SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a,this.callFlash("SetButtonCursor",[a])},SWFUpload.prototype.queueEvent=function(a,b){void 0==b?b=[]:b instanceof Array||(b=[b]);var c=this;if("function"==typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,b)}),setTimeout(function(){c.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"==typeof a&&a.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(a){var b,c=/[$]([0-9a-f]{4})/i,d={};if(void 0!=a){for(var e in a.post)if(a.post.hasOwnProperty(e)){b=e;for(var f;null!==(f=c.exec(b));)b=b.replace(f[0],String.fromCharCode(parseInt("0x"+f[1],16)));d[b]=a.post[e]}a.post=d}return a},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}},SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();return a?(this.cleanUp(a),this.queueEvent("swfupload_loaded_handler"),void 0):(this.debug("Flash called back ready but the flash movie can't be found."),void 0)},SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&"unknown"==typeof a.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{"function"==typeof a[b]&&(a[b]=null)}catch(c){}}}catch(d){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("file_queued_handler",a)},SWFUpload.prototype.fileQueueError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("file_queue_error_handler",[a,b,c])},SWFUpload.prototype.fileDialogComplete=function(a,b,c){this.queueEvent("file_dialog_complete_handler",[a,b,c])},SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("return_upload_start_handler",a)},SWFUpload.prototype.returnUploadStart=function(a){var b;if("function"==typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===b&&(b=!0),b=!!b,this.callFlash("ReturnUploadStart",[b])},SWFUpload.prototype.uploadProgress=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_progress_handler",[a,b,c])},SWFUpload.prototype.uploadError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_error_handler",[a,b,c])},SWFUpload.prototype.uploadSuccess=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_success_handler",[a,b,c])},SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("upload_complete_handler",a)},SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)},SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var b,c=[];if("object"==typeof a&&"string"==typeof a.name&&"string"==typeof a.message){for(var d in a)a.hasOwnProperty(d)&&c.push(d+": "+a[d]);b=c.join("\n")||"",c=b.split("\n"),b="EXCEPTION: "+c.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(b)}else SWFUpload.Console.writeLine(a)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(a){var b,c;try{b=document.getElementById("SWFUpload_Console"),b||(c=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(c),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",c.appendChild(b)),b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight}catch(d){alert("Exception: "+d.name+" Message: "+d.message)}};