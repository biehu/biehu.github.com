/*Minify_Cache_Memcache cached @ 2014-02-13 11:33:53;Cache id:min_faec713d4b9d7c261a69d1cee1746ef1.gz*/(function(a){a.tools=a.tools||{version:"1.0"};a.tools.layerout={event:"click",targetShow:".jj_layerout_default",pos:{},size:["400px","250px"],isFixed:true,isFixedIe6:true,template:"",title:"",content:"",self:"",btnConfig:[["<input type='button' class='btn_enter'>",function(){alert("OK")}]],timeCounter:0,numTarget:"",opacity:0.3,color:"#000000",zindex:1101,isClose:true,loadImg:"http://static.jiaju.com/jiaju/com/images/loading.gif",isUseIframe:true,isCloseMask:true,isOverlay:true,isHideScroll:false,isShowScroll:false,showAnimate:null,closeAnimate:null};var b=[];function c(h,e,g){var d=h,j=0,i=0,f=a("body").css("position");target=null,targetScroll=null,width=e.size[0]||"auto",height=e.size[1]||"auto",layerInterval=null,layerTimeout=null,doc=a(document),win=a(window),html=a("html"),overHeight=false,isIE6=(a.browser.msie&&(a.browser.version=="6.0")&&!a.support.style)?true:false,isIE7=a.browser.msie&&a.browser.version=="7.0",closeArr=[".jj_layerout_close"],timer=0,titleCls=".jj_layerout_title",contentCls=".jj_layerout_content",btnContentCls=".jj_layerout_btn",loadHtml="<div id='TB_load'></div>",defaultHtml="<div class='jj_layerout_default TB_JJ_layerout'>";defaultHtml+="<div class='hd'><input type='button' class='close jj_layerout_close' value=''>";defaultHtml+="<span class='jj_layerout_title'>\u63d0\u793a</span></div><div class='jj_layerout_content'></div>";defaultHtml+="<div class='bd'><div class='tc jj_layerout_btn'>";defaultHtml+="</div></div>";defaultHtml+="</div>";a.each(["top","bottom","left","right"],function(l,m){if(m in e.pos){var k=e.pos[m];if(k.toString().indexOf("%")!=-1){if(isIE6){e.pos[m]=parseInt(k)/100}}else{if(k=="center"){if(isIE6){e.pos[m]=0.5}else{e.pos[m]="50%"}}else{e.pos[m]=parseInt(k)}}}});a.extend(d,{addLoading:function(){a("#TB_load").hide();a("<div/>",{id:"TB_load"}).appendTo("body");var l=a("#TB_load");var k=l.find("img");if(k){k.attr("src",e.loadImg)}else{a("<img/>",{src:e.loadImg}).appendTo(l)}if(e.isFixed){if(isIE6){d.fixIE6Pos(l)}else{d.fixOther(l)}}l.show()},hideLoading:function(){a("#TB_load").hide();return d},fixIE6Pos:function(l){var k={};if("top"in e.pos){k.top=(e.isHideScroll?j:doc.scrollTop())+(e.pos.top>1?e.pos.top:e.pos.top*(win.height()-l.height()))}if("bottom"in e.pos){k.bottom=doc.height()-((e.isFixedIe6&&e.isHideScroll)?doc.scrollTop():0)-win.height()+(e.pos.bottom>1?e.pos.bottom:e.pos.bottom*win.height())}if("left"in e.pos){k.left=(e.isFixedIe6?(e.isHideScroll?i:doc.scrollLeft()):0)+(e.pos.left>1?e.pos.left:e.pos.left*(win.width()-l.width()))}if("right"in e.pos){k.right=e.pos.right>1?e.pos.right:e.pos.right*win.width()}if(k.top<0){k.top=0}l.css(k).css("position","absolute");return d},fixOther:function(q){var p=0;var o=0;var m=q.outerWidth(true);var n=q.outerHeight(true);var l=a("body");if(e.pos.top=="50%"){p=Math.max((win.height()-n)/2,0)}else{p=e.pos.top}if(e.pos.left=="50%"){o=Math.max((l.width()-m)/2,0)}else{o=e.pos.left}var k=overHeight||!e.isFixed?"absolute":"fixed";if(k=="absolute"&&!overHeight){p+=doc.scrollTop()}q.css({position:k,top:p<0?0:p,left:o,bottom:e.pos.bottom,right:e.pos.right});return d},layerCss:function(k){k.css({position:e.isFixed&&e.isFixedIe6?"fixed":"relative",display:"block","z-index":e.zindex+5,width:e.size[0]||"auto",height:e.size[1]||"auto"});return d},addIframe:function(){var k=a("#jj_layerout_iframe");if(k.length>0){if(e.isCloseMask){k.css({display:"block",opacity:e.opacity,width:"100%",height:doc.height(),left:"0px",top:"0px",background:e.color,position:"absolute","z-index":e.zindex})}}else{a("<iframe/>",{id:"jj_layerout_iframe",frameborder:"no"}).css({display:"none",opacity:e.opacity,width:"100%",height:doc.height(),left:"0px",top:"0px",background:e.color,position:"absolute","z-index":e.zindex}).appendTo("body").show()}return d},addOverLay:function(){var k=a("#JJ_layerout_SY");if(k.length>0){if(e.isCloseMask){k.css({display:"block",opacity:e.opacity,height:doc.height(),width:"100%",left:"0px",top:"0px",position:"absolute","z-index":e.zindex+1,background:e.color})}}else{a("<div/>").attr("id","JJ_layerout_SY").css({display:"none",opacity:e.opacity,height:doc.height(),width:"100%",left:"0px",top:"0px",position:"absolute","z-index":e.zindex+1,background:e.color}).appendTo("body").show()}return d},resizeOver:function(){var k=doc.height();if(e.isOverlay){a("#JJ_layerout_SY").height(k)}if(e.isUseIframe){a("#jj_layerout_iframe").height(k)}return d},addDefaultEvt:function(l){if(e.isClose){if(a.inArray("#JJ_layerout_SY",closeArr)<0){closeArr.push("#JJ_layerout_SY")}}var k=closeArr.join(",");a(k).live("click.layerout",function(n,m){if(e.closeAnimate){e.closeAnimate(l,d)}else{d.closeLayer(m).scrollToo()}});if(e.isFixed){win.bind("scroll.layerout",function(){if(!e.isHideScroll){var m=doc.height();d.resizeOver()}if(isIE6){d.fixIE6Pos(l)}else{d.fixOther(l)}});win.bind("resize.layerout",function(){d.computeHeight(l);if(isIE6){d.fixIE6Pos(l)}else{d.fixOther(l)}})}return d},fillContent:function(k){k.find(titleCls).html(e.title);k.find(contentCls).html(e.content);return d},addLayer:function(){target=a(e.template).appendTo("body");return d},addDefaultLayer:function(){target=a(defaultHtml).appendTo("body");return d},addBtnEvnt:function(m,k,l){a(m).appendTo(l).bind("click",function(){var n=true;if(k){n=k(d)}if(n===false){return false}if(e.closeAnimate){e.closeAnimate(target,d)}else{d.closeLayer().scrollToo()}})},buttonConfig:function(n){var m=a(btnContentCls);if(e.btnConfig&&e.btnConfig.length>0){var l=e.btnConfig;m.show();for(var k=0;k<l.length;k++){d.addBtnEvnt(l[k][0],l[k][1],m)}}else{m.hide()}return d},hideScroll:function(){if(e.isHideScroll){j=doc.scrollTop();if(isIE7){a("html,body").css("overflow","hidden")}else{a("body").css("overflow","hidden")}}return d},showScroll:function(){if(e.isHideScroll){if(isIE7){a("html,body").css("overflow","auto")}else{a("body").css("overflow","auto")}}return d},scrollToo:function(){if(!isIE6&&e.isHideScroll){a("html,body").scrollTop(j)}return d},computeHeight:function(n){if(e.isShowScroll){var k=win.height();var m=parseInt(n.css("top"),10);var o=n.outerHeight(true);var l=n.parent();m=!isNaN(m)?m:0;if(k<(o+m)){overHeight=true;if(!l.is(".JJ_layer_for_scroll")){d.fixedLayerScroll(true)}else{l.css("height",k)}}else{overHeight=false;if(!l.is(".JJ_layer_for_scroll")){l.css("height",k);d.fixedLayerScroll(false)}}}return d},fixedLayerScroll:function(l){if(e.isShowScroll){var k=win.height();if(l){target.wrap(a("<div/>",{"class":"JJ_layer_for_scroll"}).css({overflow:"auto",width:"100%",height:k,"z-index":e.zindex+3,background:"none",position:isIE6?"static":"fixed",top:"0px",left:"0px"}))}else{target.unwrap()}}return d},showLayer:function(l){var k=k||a.Event();k.type="onBeforeLayerShow";d.trigger(k,[d]);if(k.isDefaultPrevented()){return}l.show();var k=k||a.Event();k.type="onAfterLayerShow";d.trigger(k,[d]);if(k.isDefaultPrevented()){return}return d},initLayer:function(){var k=k||a.Event();k.type="onLayerInit";d.trigger(k,[d]);if(k.isDefaultPrevented()){return}if(e.isUseIframe){d.addIframe()}if(e.isOverlay){d.addOverLay()}d.hideScroll().scrollToo();if(e.template==""){d.addDefaultLayer()}else{d.addLayer()}d.layerCss(target).computeHeight(target);d.fillContent(target).buttonConfig(target);d.addDefaultEvt(target);if(!e.showAnimate){if(isIE6){d.fixIE6Pos(target)}else{d.fixOther(target)}}if(e.showAnimate){e.showAnimate(target,e,d)}else{d.showLayer(target)}if(e.timeCounter){d.timeOutClose()}return d},closeIframe:function(k){if(e.isCloseMask||!k){a("#jj_layerout_iframe").hide()}return d},closeOverLay:function(k){if(e.isCloseMask||!k){a("#JJ_layerout_SY").hide();a("#JJ_layerout_SY").unbind("click.layerout")}return d},closeLayer:function(l){var m=m||a.Event();m.type="onBeforeLayerClose";d.trigger(m,[d]);if(m.isDefaultPrevented()){return}target.unwrap();target.removeData("layerout");target.remove();var k=closeArr.join(",");a(k).die("click.layerout");win.unbind("scroll.layerout");win.unbind("resize.layerout");a.each(["onLayerInit","onBeforeLayerShow","onAfterLayerShow","onBeforeLayerClose","onAfterLayerClose"],function(o,n){d.unbind(n)});if(e.isCloseMask||!l){d.showScroll()}if(layerInterval){clearInterval(layerInterval)}if(layerTimeout){clearTimeout(layerTimeout)}d.closeOverLay(l);if(e.isUseIframe){d.closeIframe(l)}var m=m||a.Event();m.type="onAfterLayerClose";d.trigger(m,[d]);if(m.isDefaultPrevented()){return}return d},setIntervalClose:function(k){layerInterval=setInterval(function(){if(k<1){clearInterval(layerInterval);a(e.numTarget).text("");if(e.closeAnimate){e.closeAnimate(target,d)}else{d.closeLayer().scrollToo()}}else{a(e.numTarget).text(k);--k}},1000);return d},setTimeClose:function(k){layerTimeout=setTimeout(function(){if(e.closeAnimate){e.closeAnimate(target,d)}else{d.closeLayer().scrollToo()}},k*1000);return d},timeOutClose:function(){timer=Number(e.timeCounter)||0;if(timer>0){if(e.numTarget){d.setIntervalClose(timer)}else{d.setTimeClose(timer)}}else{}return d}});a.each(["onLayerInit","onBeforeLayerShow","onAfterLayerShow","onBeforeLayerClose","onAfterLayerClose"],function(l,k){if(a.isFunction(e[k])){d.bind(k,e[k])}else{if(d[e[k]]){d.bind(k,d[e[k]])}}});if(e.event){d.bind(e.event,function(){d.initLayer();if(g!=undefined){g.call(window,d,target)}})}else{d.initLayer();if(g!=undefined){g.call(window,d,target)}}return d}a.fn.layerout=function(d,f){var g=this;var e=this.data("layerout");this.each(function(){if(a.isFunction(d)){f=d;d=a.extend({},a.tools.layerout)}else{d=a.extend({},a.tools.layerout,d)}e=new c(a(this),d,f);a(this).data("layerout",e);b.push(e)});return d.api?e:this};a.extend({layerout:function(d,e){return a("body").layerout(d,e)}})})(jQuery);